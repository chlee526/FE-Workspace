# UI - TreeView

-   TreeView 컴포넌트
-   페이지 내 다른 컴포넌트와 sync 연결을 통하여 데이터 조회 처리
-   virtual-list 라이브러리 사용을 통하여 가상 스크롤 가능
-   노드용 Item 컴포넌트를 만들고 연결해야함

### 목차

1. [History](#history)
2. [File](#file)
3. [Useage](#useage)
4. [Props](#props)
5. [Events](#events)

---

### History

| 일자       | 버전  | 내용                                                                                                                                                                         |
| ---------- | ----- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 2024-02-01 | 2.0.1 | 초기 selectedNode Data를 올려주는 event 추가 (getSelectData)                                                                                                                 |
| 2024-01-29 | 2.0.0 | 기존 nodeInstance를 받아와 this.메소드 호출 방식 외에 상위 컴포넌트 단에서 v-on 호출 하는 방식 형태 추가<br/>❗(상위 컴포넌트와 하위 컴포넌튼간의 종속성 문제로 인하여 추가) |
| 2024-01-25 | 2.0.0 | maxNode 1뎁스 이상이며 1뎁스의 자식 노드가 존재 할 경우에만 각 노드 아이템의 앞 부분 공간 생성 (반대로는 공간 삭제)                                                          |
| 2024-01-15 | 2.0.0 | 컴포넌트 구조화 재정의 (slot 형태 => 인스턴스 화) 및 컴포넌트 내 디렉토리 정리                                                                                               |
| 2023-11-21 | 1.0.0 | CJ 그룹 매체 영향력 페이지 사용하기 위한 트리뷰 형태 생성                                                                                                                    |

---

### File

| 파일명     | 타입   | 설명                                        |
| ---------- | ------ | ------------------------------------------- |
| index      | index  | 공유 컴포넌트 메인                          |
| components | Folder | 트리뷰 컴포넌트 모음 (노드, 검색 영역 분리) |

---

### Useage

```vue
<!-- 기본 -->
<tree-view class="클래스 명칭" ref="ref 명칭" :loading="로딩 여부" :opts="데이터 목록" @click.capture="노드 클릭 메소드" @addNode="트리뷰 추가 메소드" @evt_confirm="노드 정보 추가 메소드" @evt_modify="노드 정보 수정 메소드" @evt_delete="노드 정보 삭제 메소드" />

<!-- 선택 가능 -->
<tree-view class="클래스 명칭" ref="ref 명칭" v-model="키값" :loading="loading" :opts="데이터 목록" @click.capture="노드 클릭 메소드" @addNode="트리뷰 추가 메소드" @modify="노드 정보 수정 메소드" />
```

---

### Props

|        필수        | Prop             | 설명                                                                                                                                                                     | 타입/값   | Default |
| :----------------: | :--------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------- | ------- |
|                    | **v-model**      | v-model (code값을 string 형태로 전달 받음 , 전달 받을 경우 선택 처리 가능하며 ',' 콤마 기준으로 코드값 인식)                                                             | `String`  |         |
| :heavy_check_mark: | **opts**         | 트리뷰 그려주기 위한 list<br/>EX : {code: 고유 키값, name: 노드 이름 , 그 외 전달하려는 데이터들}                                                                        | `Object`  |         |
|                    | **multiple**     | 컴포넌트 다중 선택 사용 여부                                                                                                                                             | `Boolean` | false   |
|                    | **maxNode**      | 트리뷰 노드 표현 최대 갯수                                                                                                                                               | `Number`  | 2       |
|                    | **nodeInstance** | 트리뷰 내 전달 할 component/event/prop를 정의<br/>EX : {component : 컴포넌트 객체 , event: 하위 노드에서 호출할 이벤트 함수 , 하위 노드에 전달할 상위 노드의 props 정보} | `Object`  |         |
|                    | **editType**     | 트리뷰 edit 기능 (등록/수정/삭제) 사용 여부                                                                                                                              | `Boolean` | true    |
|                    | **loading**      | 트리뷰 내부 로딩 표시 사용 여부                                                                                                                                          | `Boolean` | true    |
|                    | **dragAble**     | 트리뷰 드래그 기능                                                                                                                                                       | `Boolean` | false   |

---

### Events

|      Event      | 설명                     | Callback     |
| :-------------: | :----------------------- | :----------- |
|    **click**    | 노드 클릭 버튼           | `Object`<br> |
| **evt_confirm** | 노드 정보 추가           | `Object`<br> |
| **evt_modify**  | 노드 정보 수정           | `Object`<br> |
| **evt_delete**  | 노드 정보 삭제           | `Object`<br> |
|   **update**    | 트리뷰 내 드래그 결과 값 | `Object`<br> |

---

### Methods

-   '\*' 모양은 필수 값입니다.
-   메소드로 넘어가는 파라미터는 꼭 체크 해서 필수값이 있는지 확인해야함(단순히 {code, name} 형태로 넘어가면 트리뷰 내 부모 값이나 트리뷰 depth를 찾지 못함)

|       Event       | 설명                                 | Param                                                                                                                     |
| :---------------: | :----------------------------------- | :------------------------------------------------------------------------------------------------------------------------ |
|    **addNode**    | 노드 추가                            | {<br>*treeLevel: 추가 된 depth 레벨<br>*name: 노드 이름<br>*g_code: 본인 코드<br>*p_code: 부모 코드<br>그 외 속성 값<br>} |
|  **modifyTree**   | 노드 수정                            | {<br>*name: 노드 이름<br>*g_code: 본인 코드<br>그 외 속성 값<br>}                                                         |
|  **deleteNode**   | 노드 삭제                            | {<br>\*g_code: 본인 코드<br>}                                                                                             |
| **getSelectData** | 트리뷰 내 선택된 결과 값 확인 메소드 |                                                                                                                           |
